/**
 * Module dependencies.
 */var start=require("./common"),mongoose=start.mongoose,assert=require("assert"),random=require("../lib/utils").random,Schema=mongoose.Schema;describe("schema.documentarray",function(){it("defaults should be preserved",function(){var e=new Schema({title:String}),t=new Schema({x:{type:[e],"default":[{title:"Prometheus"}]}}),n=new Schema({x:{type:[e],"default":{title:"Prometheus"}}}),r=new Schema({x:{type:[e],"default":function(){return[{title:"Prometheus"}]}}}),i=mongoose.model("DefaultDocArrays1",t),s=mongoose.model("DefaultDocArrays2",n),o=mongoose.model("DefaultDocArrays3",r);[i,s,o].forEach(function(e){var t=new e;assert.ok(Array.isArray(t.x));assert.equal(1,t.x.length);assert.equal("Prometheus",t.x[0].title)})})});