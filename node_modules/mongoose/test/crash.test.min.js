// GH-407
var start=require("./common"),assert=require("assert"),mongoose=start.mongoose;describe("crash: (gh-407)",function(){it("test mongodb crash with invalid objectid string",function(e){var t=mongoose.createConnection("mongodb://localhost/test-crash"),n=new mongoose.Schema({name:{type:String}}),r=t.model("Guy",n);r.find({_id:{$in:["4e0de2a6ee47bff98000e145","4e137bd81a6a8e00000007ac","","4e0e2ca0795666368603d974"]}},function(n){t.close();try{assert.equal("Invalid ObjectId",n.message)}catch(r){console.error(n);throw r}e()})})});