/**
 * Module dependecies.
 */function CursorStream(e){if(!(this instanceof CursorStream))return new CursorStream(e);Stream.call(this);this.readable=!0;this.paused=!1;this._cursor=e;this._destroyed=null;var t=this;process.nextTick(function(){t._init()})}var Stream=require("stream").Stream;CursorStream.prototype.__proto__=Stream.prototype;CursorStream.prototype.readable;CursorStream.prototype.paused;CursorStream.prototype._init=function(){if(this._destroyed)return;this._next()};CursorStream.prototype._next=function(){if(this.paused||this._destroyed)return;var e=this;process.nextTick(function(){e._cursor.nextObject(function(t,n){e._onNextObject(t,n)})})};CursorStream.prototype._onNextObject=function(e,t){if(e)return this.destroy(e);if(!t)return this.destroy();this.emit("data",t);this._next()};CursorStream.prototype.pause=function(){this.paused=!0};CursorStream.prototype.resume=function(){this.paused=!1;this._next()};CursorStream.prototype.destroy=function(e){if(this._destroyed)return;this._destroyed=!0;this.readable=!1;this._cursor.close();e&&this.emit("error",e);this.emit("close")};module.exports=exports=CursorStream;