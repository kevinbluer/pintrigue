function NamedScope(){}var Query=require("./query");NamedScope.prototype.query;NamedScope.prototype.where=function(){var e=this.query||(this.query=new Query);e.where.apply(e,arguments);return e};NamedScope.prototype.decorate=function(e,t){var n=this.name,r=this.block,i=this.query;r?r.length===0?Object.defineProperty(e,n,{get:t.block0(r)}):e[n]=t.blockN(r):Object.defineProperty(e,n,{get:t.basic(i)})};NamedScope.prototype.compile=function(e){var t=this.scopesByName,n;for(var r in t){n=t[r];n.decorate(e,{block0:function(e){return function(){var t=this._cumulativeQuery||(this._cumulativeQuery=(new Query).bind(this));e.call(t);return this}},blockN:function(e){return function(){var t=this._cumulativeQuery||(this._cumulativeQuery=(new Query).bind(this));e.apply(t,arguments);return this}},basic:function(e){return function(){var t=this._cumulativeQuery||(this._cumulativeQuery=(new Query).bind(this));t.find(e);return this}}})}};module.exports=NamedScope;